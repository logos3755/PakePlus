import{_ as Ae,a as Ce,b as Pe}from"./tree.B3YHNUVY.js";import{ae as k,af as A,ag as me,ah as be,ai as ae,aj as ve,ak as Be,al as ge,am as L,an as V,ao as Z,ap as G,aq as Me,ar as Re,as as ke,at as Le,au as Ee,av as Xe,aw as Ve,ax as Ye,ay as ze,az as W,aA as He,aB as Oe,aC as Ze,aD as Ge,aE as We,aF as $e,aG as Fe,aH as $,aI as je,aJ as B,aK as Y,aL as Ue,aM as ye,aN as qe,aO as Ke,aP as Je,aQ as Qe,aR as et,aS as tt,aT as at,aU as rt,aV as nt,aW as ot,_ as _e,aX as it,M as st,c as lt,aY as ut,aZ as ct,a_ as dt,r as I,a6 as re,v as M,x as R,A as y,E as D,B as T,C as F,a3 as ht,o as pt,y as ne,a$ as ft,z as mt,ab as oe,b0 as vt,ad as gt}from"./entry.B79t8160.js";import{i as ie,o as yt,S as _t,D as xt,a as Nt,B as Tt}from"./index.esm.min.CxlJfyIl.js";import{B as xe}from"./Button.DLsEGMw6.js";import{u as Ne}from"./use-message.BH-wgOTP.js";import{_ as wt,S as St}from"./Scrollbar.DfppsR0A.js";import{_ as Dt}from"./loading.DIF8ReVX.js";import{_ as It,a as At}from"./Grid.DwqS4h9-.js";import{_ as Ct}from"./Card.t-T5tsO1.js";import{_ as Pt}from"./Tree.cVHN8enr.js";import{_ as bt}from"./Layout.BrvNxXSP.js";import"./iconify.BCVX6Ifv.js";import"./FormItem.C3DR4S6Q.js";import"./use-merged-state.Dyf7G0SV.js";import"./Space.CoyloG0X.js";import"./Modal.CeSbMG6K.js";import"./Checkbox.BnzM6f0E.js";import"./Empty.Dpu5cBr_.js";var Bt=function(a){k(t,a);function t(e){var r=a.call(this)||this;r._zr=e;var n=A(r._mousedownHandler,r),o=A(r._mousemoveHandler,r),i=A(r._mouseupHandler,r),s=A(r._mousewheelHandler,r),u=A(r._pinchHandler,r);return r.enable=function(l,c){this.disable(),this._opt=me(be(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),l==null&&(l=!0),(l===!0||l==="move"||l==="pan")&&(e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",i)),(l===!0||l==="scale"||l==="zoom")&&(e.on("mousewheel",s),e.on("pinch",u))},r.disable=function(){e.off("mousedown",n),e.off("mousemove",o),e.off("mouseup",i),e.off("mousewheel",s),e.off("pinch",u)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!ae(e)){for(var r=e.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!E("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||ie(this._zr,"globalPan"))){var r=e.offsetX,n=e.offsetY,o=this._x,i=this._y,s=r-o,u=n-i;this._x=r,this._y=n,this._opt.preventDefaultMouseMove&&ve(e.event),Te(this,"pan","moveOnMouseMove",e,{dx:s,dy:u,oldX:o,oldY:i,newX:r,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){ae(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var r=E("zoomOnMouseWheel",e,this._opt),n=E("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),s=e.offsetX,u=e.offsetY;if(!(o===0||!r&&!n)){if(r){var l=i>3?1.4:i>1?1.2:1.1,c=o>0?l:1/l;z(this,"zoom","zoomOnMouseWheel",e,{scale:c,originX:s,originY:u,isAvailableBehavior:null})}if(n){var d=Math.abs(o),h=(o>0?1:-1)*(d>3?.4:d>1?.15:.05);z(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:h,originX:s,originY:u,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!ie(this._zr,"globalPan")){var r=e.pinchScale>1?1.1:1/1.1;z(this,"zoom",null,e,{scale:r,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(Be);function z(a,t,e,r,n){a.pointerChecker&&a.pointerChecker(r,n.originX,n.originY)&&(ve(r.event),Te(a,t,e,r,n))}function Te(a,t,e,r,n){n.isAvailableBehavior=A(E,null,e,r),a.trigger(t,n)}function E(a,t,e){var r=e[a];return!a||r&&(!ge(r)||t.event[r+"Key"])}function Mt(a,t,e){var r=a.target;r.x+=t,r.y+=e,r.dirty()}function Rt(a,t,e,r){var n=a.target,o=a.zoomLimit,i=a.zoom=a.zoom||1;if(i*=t,o){var s=o.min||0,u=o.max||1/0;i=Math.max(Math.min(u,i),s)}var l=i/a.zoom;a.zoom=i,n.x-=(e-n.x)*(l-1),n.y-=(r-n.y)*(l-1),n.scaleX*=l,n.scaleY*=l,n.dirty()}var se=G,kt=function(a){k(t,a);function t(e){var r=a.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new L,r._rawTransformable=new L,r.name=e,r}return t.prototype.setBoundingRect=function(e,r,n,o){return this._rect=new V(e,r,n,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,r,n,o){this._transformTo(e,r,n,o),this._viewRect=new V(e,r,n,o)},t.prototype._transformTo=function(e,r,n,o){var i=this.getBoundingRect(),s=this._rawTransformable;s.transform=i.calculateTransform(new V(e,r,n,o));var u=s.parent;s.parent=null,s.decomposeTransform(),s.parent=u,this._updateTransform()},t.prototype.setCenter=function(e,r){e&&(this._center=[Z(e[0],r.getWidth()),Z(e[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var r=this.zoomLimit;r&&(r.max!=null&&(e=Math.min(r.max,e)),r.min!=null&&(e=Math.max(r.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),r=e.x+e.width/2,n=e.y+e.height/2;return[r,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),i=this.getZoom();o=G([],o,e),n=G([],n,e),r.originX=o[0],r.originY=o[1],r.x=n[0]-o[0],r.y=n[1]-o[1],r.scaleX=r.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,r=this._rawTransformable;r.parent=e,e.updateTransform(),r.updateTransform(),Me(this.transform||(this.transform=[]),r.transform||Re()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],ke(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,r=this._roamTransformable,n=new L;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,r,n){var o=r?this._rawTransform:this.transform;return n=n||[],o?se(n,e,o):Le(n,e)},t.prototype.pointToData=function(e){var r=this.invTransform;return r?se([],e,r):[e[0],e[1]]},t.prototype.convertToPixel=function(e,r,n){var o=le(r);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var o=le(r);return o===this?o.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(L);function le(a){var t=a.seriesModel;return t?t.coordinateSystem:null}function ue(a,t){return a.pointToProjected?a.pointToProjected(t):a.pointToData(t)}function Lt(a,t,e,r){var n=a.getZoom(),o=a.getCenter(),i=t.zoom,s=a.projectedToPoint?a.projectedToPoint(o):a.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,a.setCenter(ue(a,s),r)),i!=null){a.scaleX*=i,a.scaleY*=i;var u=(t.originX-a.x)*(i-1),l=(t.originY-a.y)*(i-1);a.x-=u,a.y-=l,a.updateTransform(),a.setCenter(ue(a,s),r),a.setZoom(i*n)}return{center:a.getCenter(),zoom:a.getZoom()}}function Et(a){var t=a;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],r,n;r=e.pop();)if(n=r.children,r.isExpand&&n.length)for(var o=n.length,i=o-1;i>=0;i--){var s=n[i];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i,thread:null},e.push(s)}}function Xt(a,t){var e=a.isExpand?a.children:[],r=a.parentNode.children,n=a.hierNode.i?r[a.hierNode.i-1]:null;if(e.length){zt(a);var o=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;n?(a.hierNode.prelim=n.hierNode.prelim+t(a,n),a.hierNode.modifier=a.hierNode.prelim-o):a.hierNode.prelim=o}else n&&(a.hierNode.prelim=n.hierNode.prelim+t(a,n));a.parentNode.hierNode.defaultAncestor=Ht(a,n,a.parentNode.hierNode.defaultAncestor||r[0],t)}function Vt(a){var t=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:t},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function ce(a){return arguments.length?a:Gt}function b(a,t){return a-=Math.PI/2,{x:t*Math.cos(a),y:t*Math.sin(a)}}function Yt(a,t){return Ee(a.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function zt(a){for(var t=a.children,e=t.length,r=0,n=0;--e>=0;){var o=t[e];o.hierNode.prelim+=r,o.hierNode.modifier+=r,n+=o.hierNode.change,r+=o.hierNode.shift+n}}function Ht(a,t,e,r){if(t){for(var n=a,o=a,i=o.parentNode.children[0],s=t,u=n.hierNode.modifier,l=o.hierNode.modifier,c=i.hierNode.modifier,d=s.hierNode.modifier;s=H(s),o=O(o),s&&o;){n=H(n),i=O(i),n.hierNode.ancestor=a;var h=s.hierNode.prelim+d-o.hierNode.prelim-l+r(s,o);h>0&&(Zt(Ot(s,a,e),a,h),l+=h,u+=h),d+=s.hierNode.modifier,l+=o.hierNode.modifier,u+=n.hierNode.modifier,c+=i.hierNode.modifier}s&&!H(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=d-u),o&&!O(i)&&(i.hierNode.thread=o,i.hierNode.modifier+=l-c,e=a)}return e}function H(a){var t=a.children;return t.length&&a.isExpand?t[t.length-1]:a.hierNode.thread}function O(a){var t=a.children;return t.length&&a.isExpand?t[0]:a.hierNode.thread}function Ot(a,t,e){return a.hierNode.ancestor.parentNode===t.parentNode?a.hierNode.ancestor:e}function Zt(a,t,e){var r=e/(t.hierNode.i-a.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,a.hierNode.change+=r}function Gt(a,t){return a.parentNode===t.parentNode?1:2}var Wt=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),$t=function(a){k(t,a);function t(e){return a.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Wt},t.prototype.buildPath=function(e,r){var n=r.childPoints,o=n.length,i=r.parentPoint,s=n[0],u=n[o-1];if(o===1){e.moveTo(i[0],i[1]),e.lineTo(s[0],s[1]);return}var l=r.orient,c=l==="TB"||l==="BT"?0:1,d=1-c,h=Z(r.forkPosition,1),f=[];f[c]=i[c],f[d]=i[d]+(u[d]-i[d])*h,e.moveTo(i[0],i[1]),e.lineTo(f[0],f[1]),e.moveTo(s[0],s[1]),f[c]=s[c],e.lineTo(f[0],f[1]),f[c]=u[c],e.lineTo(f[0],f[1]),e.lineTo(u[0],u[1]);for(var m=1;m<o-1;m++){var p=n[m];e.moveTo(p[0],p[1]),f[c]=p[c],e.lineTo(f[0],f[1])}},t}(Xe),Ft=function(a){k(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new Ve,e}return t.prototype.init=function(e,r){this._controller=new Bt(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,r,n){var o=e.getData(),i=e.layoutInfo,s=this._mainGroup,u=e.get("layout");u==="radial"?(s.x=i.x+i.width/2,s.y=i.y+i.height/2):(s.x=i.x,s.y=i.y),this._updateViewCoordSys(e,n),this._updateController(e,r,n);var l=this._data;o.diff(l).add(function(c){de(o,c)&&he(o,c,null,s,e)}).update(function(c,d){var h=l.getItemGraphicEl(d);if(!de(o,c)){h&&fe(l,d,h,s,e);return}he(o,c,h,s,e)}).remove(function(c){var d=l.getItemGraphicEl(c);d&&fe(l,c,d,s,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,d){c.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:d})})}),this._data=o},t.prototype._updateViewCoordSys=function(e,r){var n=e.getData(),o=[];n.each(function(d){var h=n.getItemLayout(d);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var i=[],s=[];Ye(o,i,s);var u=this._min,l=this._max;s[0]-i[0]===0&&(i[0]=u?u[0]:i[0]-1,s[0]=l?l[0]:s[0]+1),s[1]-i[1]===0&&(i[1]=u?u[1]:i[1]-1,s[1]=l?l[1]:s[1]+1);var c=e.coordinateSystem=new kt;c.zoomLimit=e.get("scaleLimit"),c.setBoundingRect(i[0],i[1],s[0]-i[0],s[1]-i[1]),c.setCenter(e.get("center"),r),c.setZoom(e.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=i,this._max=s},t.prototype._updateController=function(e,r,n){var o=this,i=this._controller,s=this._controllerHost,u=this.group;i.setPointerChecker(function(l,c,d){var h=u.getBoundingRect();return h.applyTransform(u.transform),h.contain(c,d)&&!yt(l,n,e)}),i.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(l){Mt(s,l.dx,l.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:l.dx,dy:l.dy})}).on("zoom",function(l){Rt(s,l.scale,l.originX,l.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:l.scale,originX:l.originX,originY:l.originY}),o._updateNodeAndLinkScale(e),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var r=e.getData(),n=this._getNodeGlobalScale(e);r.eachItemGraphicEl(function(o,i){o.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var r=e.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,o=r.scaleX||1,i=r.getZoom(),s=(i-1)*n+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ze);function de(a,t){var e=a.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function he(a,t,e,r,n){var o=!e,i=a.tree.getNodeByDataIndex(t),s=i.getModel(),u=i.getVisual("style").fill,l=i.isExpand===!1&&i.children.length!==0?u:"#fff",c=a.tree.root,d=i.parentNode===c?i:i.parentNode||i,h=a.getItemGraphicEl(d.dataIndex),f=d.getLayout(),m=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:f,p=i.getLayout();o?(e=new _t(a,t,null,{symbolInnerColor:l,useNameLabel:!0}),e.x=m.x,e.y=m.y):e.updateData(a,t,null,{symbolInnerColor:l,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,r.add(e),a.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,W(e,{x:p.x,y:p.y},n);var x=e.getSymbolPath();if(n.get("layout")==="radial"){var N=c.children[0],_=N.getLayout(),v=N.children.length,g=void 0,S=void 0;if(p.x===_.x&&i.isExpand===!0&&N.children.length){var C={x:(N.children[0].getLayout().x+N.children[v-1].getLayout().x)/2,y:(N.children[0].getLayout().y+N.children[v-1].getLayout().y)/2};g=Math.atan2(C.y-_.y,C.x-_.x),g<0&&(g=Math.PI*2+g),S=C.x<_.x,S&&(g=g-Math.PI)}else g=Math.atan2(p.y-_.y,p.x-_.x),g<0&&(g=Math.PI*2+g),i.children.length===0||i.children.length!==0&&i.isExpand===!1?(S=p.x<_.x,S&&(g=g-Math.PI)):(S=p.x>_.x,S||(g=g-Math.PI));var De=S?"left":"right",q=s.getModel("label"),K=q.get("rotate"),Ie=K*(Math.PI/180),J=x.getTextContent();J&&(x.setTextConfig({position:q.get("position")||De,rotation:K==null?-g:Ie,origin:"center"}),J.setStyle("verticalAlign","middle"))}var X=s.get(["emphasis","focus"]),Q=X==="relative"?He(i.getAncestorsIndices(),i.getDescendantIndices()):X==="ancestor"?i.getAncestorsIndices():X==="descendant"?i.getDescendantIndices():null;Q&&(Oe(e).focus=Q),jt(n,i,c,e,m,f,p,r),e.__edge&&(e.onHoverStateChange=function(ee){if(ee!=="blur"){var te=i.parentNode&&a.getItemGraphicEl(i.parentNode.dataIndex);te&&te.hoverState===Ze||Ge(e.__edge,ee)}})}function jt(a,t,e,r,n,o,i,s){var u=t.getModel(),l=a.get("edgeShape"),c=a.get("layout"),d=a.getOrient(),h=a.get(["lineStyle","curveness"]),f=a.get("edgeForkPosition"),m=u.getModel("lineStyle").getLineStyle(),p=r.__edge;if(l==="curve")t.parentNode&&t.parentNode!==e&&(p||(p=r.__edge=new We({shape:j(c,d,h,n,n)})),W(p,{shape:j(c,d,h,o,i)},a));else if(l==="polyline"&&c==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var x=t.children,N=[],_=0;_<x.length;_++){var v=x[_].getLayout();N.push([v.x,v.y])}p||(p=r.__edge=new $t({shape:{parentPoint:[i.x,i.y],childPoints:[[i.x,i.y]],orient:d,forkPosition:f}})),W(p,{shape:{parentPoint:[i.x,i.y],childPoints:N}},a)}p&&!(l==="polyline"&&!t.isExpand)&&(p.useStyle(me({strokeNoScale:!0,fill:null},m)),$e(p,u,"lineStyle"),Fe(p),s.add(p))}function pe(a,t,e,r,n){var o=t.tree.root,i=we(o,a),s=i.source,u=i.sourceLayout,l=t.getItemGraphicEl(a.dataIndex);if(l){var c=t.getItemGraphicEl(s.dataIndex),d=c.__edge,h=l.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),f=r.get("edgeShape"),m=r.get("layout"),p=r.get("orient"),x=r.get(["lineStyle","curveness"]);h&&(f==="curve"?$(h,{shape:j(m,p,x,u,u),style:{opacity:0}},r,{cb:function(){e.remove(h)},removeOpt:n}):f==="polyline"&&r.get("layout")==="orthogonal"&&$(h,{shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]]},style:{opacity:0}},r,{cb:function(){e.remove(h)},removeOpt:n}))}}function we(a,t){for(var e=t.parentNode===a?t:t.parentNode||t,r;r=e.getLayout(),r==null;)e=e.parentNode===a?e:e.parentNode||e;return{source:e,sourceLayout:r}}function fe(a,t,e,r,n){var o=a.tree.getNodeByDataIndex(t),i=a.tree.root,s=we(i,o).sourceLayout,u={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};$(e,{x:s.x+1,y:s.y+1},n,{cb:function(){r.remove(e),a.setItemGraphicEl(t,null)},removeOpt:u}),e.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:u}),o.children.forEach(function(l){pe(l,a,r,n,u)}),pe(o,a,r,n,u)}function j(a,t,e,r,n){var o,i,s,u,l,c,d,h;if(a==="radial"){l=r.rawX,d=r.rawY,c=n.rawX,h=n.rawY;var f=b(l,d),m=b(l,d+(h-d)*e),p=b(c,h+(d-h)*e),x=b(c,h);return{x1:f.x||0,y1:f.y||0,x2:x.x||0,y2:x.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:p.x||0,cpy2:p.y||0}}else l=r.x,d=r.y,c=n.x,h=n.y,(t==="LR"||t==="RL")&&(o=l+(c-l)*e,i=d,s=c+(l-c)*e,u=h),(t==="TB"||t==="BT")&&(o=l,i=d+(h-d)*e,s=c,u=h+(d-h)*e);return{x1:l,y1:d,x2:c,y2:h,cpx1:o,cpy1:i,cpx2:s,cpy2:u}}var w=je();function Ut(a){var t=a.mainData,e=a.datas;e||(e={main:t},a.datasAttr={main:"data"}),a.datas=a.mainData=null,Se(t,e,a),B(e,function(r){B(t.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,Y(qt,a))})}),t.wrapMethod("cloneShallow",Y(Jt,a)),B(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,Y(Kt,a))}),Ue(e[t.dataType]===t)}function qt(a,t){if(ta(this)){var e=ye({},w(this).datas);e[this.dataType]=t,Se(t,e,a)}else U(t,this.dataType,w(this).mainData,a);return t}function Kt(a,t){return a.struct&&a.struct.update(),t}function Jt(a,t){return B(w(t).datas,function(e,r){e!==t&&U(e.cloneShallow(),r,t,a)}),t}function Qt(a){var t=w(this).mainData;return a==null||t==null?t:w(t).datas[a]}function ea(){var a=w(this).mainData;return a==null?[{data:a}]:qe(Ke(w(a).datas),function(t){return{type:t,data:w(a).datas[t]}})}function ta(a){return w(a).mainData===a}function Se(a,t,e){w(a).datas={},B(t,function(r,n){U(r,n,a,e)})}function U(a,t,e,r){w(e).datas[t]=a,w(a).mainData=e,a.dataType=t,r.struct&&(a[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=a),a.getLinkedData=Qt,a.getLinkedDataAll=ea}var aa=function(){function a(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(t,e,r){at(t)&&(r=e,e=t,t=null),t=t||{},ge(t)&&(t={order:t});var n=t.order||"preorder",o=this[t.attr||"children"],i;n==="preorder"&&(i=e.call(r,this));for(var s=0;!i&&s<o.length;s++)o[s].eachNode(t,e,r);n==="postorder"&&e.call(r,this)},a.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},a.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,r=this.children,n=r.length;e<n;e++){var o=r[e].getNodeById(t);if(o)return o}},a.prototype.contains=function(t){if(t===this)return!0;for(var e=0,r=this.children,n=r.length;e<n;e++){var o=r[e].contains(t);if(o)return o}},a.prototype.getAncestors=function(t){for(var e=[],r=t?this:this.parentNode;r;)e.push(r),r=r.parentNode;return e.reverse(),e},a.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},a.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},a.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},a.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,r=e.data.getItemModel(this.dataIndex);return r.getModel(t)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},a.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},a.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},a.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},a}(),ra=function(){function a(t){this.type="tree",this._nodes=[],this.hostModel=t}return a.prototype.eachNode=function(t,e,r){this.root.eachNode(t,e,r)},a.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},a.prototype.getNodeById=function(t){return this.root.getNodeById(t)},a.prototype.update=function(){for(var t=this.data,e=this._nodes,r=0,n=e.length;r<n;r++)e[r].dataIndex=-1;for(var r=0,n=t.count();r<n;r++)e[t.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(t,e,r){var n=new a(e),o=[],i=1;s(t);function s(c,d){var h=c.value;i=Math.max(i,Je(h)?h.length:1),o.push(c);var f=new aa(Qe(c.name,""),n);d?na(f,d):n.root=f,n._nodes.push(f);var m=c.children;if(m)for(var p=0;p<m.length;p++)s(m[p],f)}n.root.updateDepthAndHeight(0);var u=et(o,{coordDimensions:["value"],dimensionsCount:i}).dimensions,l=new tt(u,e);return l.initData(o),r&&r(l),Ut({mainData:l,struct:n,structAttr:"tree"}),n.update(),n},a}();function na(a,t){var e=t.children;a.parentNode!==t&&(e.push(a),a.parentNode=t)}function oa(a,t){for(var e=[];a;){var r=a.dataIndex;e.push({name:a.name,dataIndex:r,value:t.getRawValue(r)}),a=a.parentNode}return e.reverse(),e}var ia=function(a){k(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var r={name:e.name,children:e.data},n=e.leaves||{},o=new rt(n,this,this.ecModel),i=ra.createTree(r,this,s);function s(d){d.wrapMethod("getItemModel",function(h,f){var m=i.getNodeByDataIndex(f);return m&&m.children.length&&m.isExpand||(h.parentModel=o),h})}var u=0;i.eachNode("preorder",function(d){d.depth>u&&(u=d.depth)});var l=e.expandAndCollapse,c=l&&e.initialTreeDepth>=0?e.initialTreeDepth:u;return i.root.eachNode("preorder",function(d){var h=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=h&&h.collapsed!=null?!h.collapsed:d.depth<=c}),i.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,r,n){for(var o=this.getData().tree,i=o.root.children[0],s=o.getNodeByDataIndex(e),u=s.getValue(),l=s.name;s&&s!==i;)l=s.parentNode.name+"."+l,s=s.parentNode;return nt("nameValue",{name:l,value:u,noValue:isNaN(u)||u==null})},t.prototype.getDataParams=function(e){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=oa(n,this),r.collapsed=!n.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(ot);function sa(a,t,e){for(var r=[a],n=[],o;o=r.pop();)if(n.push(o),o.isExpand){var i=o.children;if(i.length)for(var s=0;s<i.length;s++)r.push(i[s])}for(;o=n.pop();)t(o,e)}function P(a,t){for(var e=[a],r;r=e.pop();)if(t(r),r.isExpand){var n=r.children;if(n.length)for(var o=n.length-1;o>=0;o--)e.push(n[o])}}function la(a,t){a.eachSeriesByType("tree",function(e){ua(e,t)})}function ua(a,t){var e=Yt(a,t);a.layoutInfo=e;var r=a.get("layout"),n=0,o=0,i=null;r==="radial"?(n=2*Math.PI,o=Math.min(e.height,e.width)/2,i=ce(function(v,g){return(v.parentNode===g.parentNode?1:2)/v.depth})):(n=e.width,o=e.height,i=ce());var s=a.getData().tree.root,u=s.children[0];if(u){Et(s),sa(u,Xt,i),s.hierNode.modifier=-u.hierNode.prelim,P(u,Vt);var l=u,c=u,d=u;P(u,function(v){var g=v.getLayout().x;g<l.getLayout().x&&(l=v),g>c.getLayout().x&&(c=v),v.depth>d.depth&&(d=v)});var h=l===c?1:i(l,c)/2,f=h-l.getLayout().x,m=0,p=0,x=0,N=0;if(r==="radial")m=n/(c.getLayout().x+h+f),p=o/(d.depth-1||1),P(u,function(v){x=(v.getLayout().x+f)*m,N=(v.depth-1)*p;var g=b(x,N);v.setLayout({x:g.x,y:g.y,rawX:x,rawY:N},!0)});else{var _=a.getOrient();_==="RL"||_==="LR"?(p=o/(c.getLayout().x+h+f),m=n/(d.depth-1||1),P(u,function(v){N=(v.getLayout().x+f)*p,x=_==="LR"?(v.depth-1)*m:n-(v.depth-1)*m,v.setLayout({x,y:N},!0)})):(_==="TB"||_==="BT")&&(m=n/(c.getLayout().x+h+f),p=o/(d.depth-1||1),P(u,function(v){x=(v.getLayout().x+f)*m,N=_==="TB"?(v.depth-1)*p:o-(v.depth-1)*p,v.setLayout({x,y:N},!0)}))}}}function ca(a){a.eachSeriesByType("tree",function(t){var e=t.getData(),r=e.tree;r.eachNode(function(n){var o=n.getModel(),i=o.getModel("itemStyle").getItemStyle(),s=e.ensureUniqueItemVisual(n.dataIndex,"style");ye(s,i)})})}function da(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var n=t.dataIndex,o=r.getData().tree,i=o.getNodeByDataIndex(n);i.isExpand=!i.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,r){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var o=n.coordinateSystem,i=Lt(o,t,void 0,r);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})})}function ha(a){a.registerChartView(Ft),a.registerSeriesModel(ia),a.registerLayout(la),a.registerVisual(ca),da(a)}const pa={key:0,class:"h-full w-full"},fa={key:1,class:"grid-empty"},ma={__name:"charts",props:{menuID:{type:[Number,String],required:!1,default:null}},setup(a){const t=it();st(xt,lt(()=>t.theme==="darkTheme"?"dark":"light")),ut([ct,Nt,ha,dt]);const e=a,r=I({name:"",roles:[]}),n=I(!1),o=Ne(),i=async()=>{n.value=!0;try{const{data:u}=await ht.get(`/module/${e.menuID}/roles`),{status:l,res:c}=u.value;l===200?(r.value=c,o.success("角色权限数据获取成功")):(r.value=null,o.error("获取角色权限数据失败"))}catch{r.value=null,o.error("获取角色权限数据异常")}finally{n.value=!1}},s=I({backgroundColor:"",renderer:"svg",series:[{type:"tree",data:[r.value],top:"1%",left:"7%",bottom:"1%",right:"15%",symbolSize:7,symbol:function(u,l){if(l.value==!0&&l.collapsed==!0)l.data.label={color:"#49AA19",fontSize:"15",fontWeight:"bold"};else return"circle"},zoom:.8,itemStyle:{borderWidth:2,borderType:"solid",borderColor:"#0780ED",borderDash:[0,0],borderDashOffset:0,borderCap:"round"},label:{borderWidth:1,position:"left",verticlign:"middle",align:"right",fontSize:15},leaves:{label:{position:"right",verticalAlign:"middle",align:"left"}},emphasis:{focus:"descendant"},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750}]});return re(()=>e.menuID,u=>{u&&i()}),re(()=>r.value,()=>{s.value.series[0].data=[r.value]},{deep:!0}),(u,l)=>{const c=Ae,d=xe,h=wt;return a.menuID&&r.value?(M(),R("div",pa,[y(D(Tt),{class:"chart",option:s.value,autoresize:""},null,8,["option"])])):(M(),R("div",fa,[y(h,{status:"warning",title:"OOPS",description:r.value===null?"获取角色权限数据失败":"请先选择对应模块"},{icon:T(()=>[y(c,{class:"text-6xl"})]),footer:T(()=>[y(d,null,{default:T(()=>l[0]||(l[0]=[F("Task Easy")])),_:1})]),_:1},8,["description"])]))}}},va=_e(ma,[["__scopeId","data-v-f6041c44"]]),ga={class:"component-context p-12"},ya={class:"role-container h-full"},_a={key:0},xa={class:"flex justify-between"},Na={key:0},Ta={__name:"menuManage",setup(a){const t=I(null),e=I(!1),r=I(null),n=u=>{u&&(r.value=u)},o=I(null),i=Ne(),s=async()=>{try{await o.value.handleSubmit(),o.value.menuStatus&&(i.success("保存成功"),r.value=null,vt(()=>{r.value=o.value.formValue.id}))}catch{i.error("保存失败，请重试")}};return pt(()=>{}),(u,l)=>{const c=Ce,d=Ct,h=It,f=Pt,m=xe,p=Pe,x=St,N=va,_=At,v=gt,g=bt,S=Dt;return M(),R("div",ga,[y(g,{class:"flow-content h-full","native-scrollbar":!1},{default:T(()=>[ne("div",ya,[y(v,{class:"h-full"},{default:T(()=>[y(d,{title:"目录管理",class:"menu-management"},{default:T(()=>[y(_,{cols:24,"x-gap":12,class:"menu-management-grid relative"},{default:T(()=>[y(h,{span:6,class:"menu-management-column relative"},{default:T(()=>[y(d,{class:"menu-card"},{default:T(()=>[y(c,{normal:!0,relateObject:D(t),onGetModuleKey:n},null,8,["relateObject"])]),_:1})]),_:1}),y(h,{span:18,class:"menu-management-column relative"},{default:T(()=>[y(d,{class:"menu-card flex"},{default:T(()=>[y(_,{cols:24,"x-gap":12,class:"menu-management-grid relative"},{default:T(()=>[y(h,{span:8,class:"menu-management-column relative"},{default:T(()=>[y(d,{class:"menu-card"},{header:T(()=>[y(f,{value:D(e),"onUpdate:value":l[0]||(l[0]=C=>ft(e)?e.value=C:null)},null,8,["value"]),D(r)?(M(),R("div",_a,[ne("div",xa,[F(mt(D(e)?"编辑目录":"目录信息")+" ",1),D(e)?(M(),R("div",Na,[y(m,{size:"small",type:"primary",onClick:s},{default:T(()=>l[1]||(l[1]=[F("保 存")])),_:1})])):oe("",!0)])])):oe("",!0)]),default:T(()=>[y(x,{style:{"max-height":"100%"},trigger:"hover",class:"w-full"},{default:T(()=>[y(p,{ref_key:"menuForm",ref:o,editMode:D(e),menuID:D(r)},null,8,["editMode","menuID"])]),_:1})]),_:1})]),_:1}),y(h,{span:16,class:"menu-management-column relative"},{default:T(()=>[y(d,{class:"menu-card flex"},{default:T(()=>[y(N,{menuID:D(r)},null,8,["menuID"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),y(S,{loading:"加载中..."})])}}},Ha=_e(Ta,[["__scopeId","data-v-da5aa94f"]]);export{Ha as default};
