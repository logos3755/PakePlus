import{_ as gt}from"./loading.DIF8ReVX.js";import{d as te,g,F as M,G as Ue,H as A,I as Y,J as ee,K as _e,L as yt,M as $e,N as Ke,O as qe,P as he,Q as ge,r as E,R as se,S as bt,c as T,T as He,U as oe,V as we,W as Ee,X as wt,Y as Et,Z as Ct,$ as Pt,a0 as kt,a1 as $t,v as U,x as Z,y as S,a2 as It,a3 as L,a4 as xt,o as Ie,a5 as Ae,_ as xe,a6 as St,i as Gt,A as l,B as f,C as V,z as le,a7 as pe,a8 as Oe,a9 as Rt,aa as Te,ab as Ce,ac as De,ad as Je}from"./entry.B79t8160.js";import{_ as Vt}from"./delete-bin6-line.BKYKD4Vo.js";import{_ as Bt,a as Mt}from"./search-line.CPsQ9K27.js";import{R as zt,g as Ut,_ as At,a as Ot}from"./guid.DT1SDijq.js";import{u as Se}from"./use-message.BH-wgOTP.js";import{A as Ne,N as We}from"./Tag.ehYFDh3x.js";import{N as Tt}from"./Icon.Cdvp5HLq.js";import{b as Dt,_ as fe,f as Nt,u as ke,B as Q,c as ue}from"./Button.DLsEGMw6.js";import{_ as jt}from"./Space.CoyloG0X.js";import{_ as Ft,S as Lt}from"./Scrollbar.DfppsR0A.js";import{p as Kt,_ as qt}from"./Popover.rmCVgHdz.js";import{u as Ht,r as ve,a as je,b as Jt}from"./use-merged-state.Dyf7G0SV.js";import{_ as Ze}from"./Card.t-T5tsO1.js";import{_ as Wt}from"./Layout.BrvNxXSP.js";import{_ as Zt}from"./Pagination.oy2G0JHk.js";import{_ as Xt,a as Qt}from"./FormItem.C3DR4S6Q.js";import{A as Yt,_ as en}from"./Radio.Cj93eV8g.js";import{_ as tn}from"./RadioGroup.BjsLswYz.js";import{_ as nn}from"./Checkbox.BnzM6f0E.js";import{_ as an}from"./Tooltip.LN34_rQh.js";import{_ as rn}from"./Modal.CeSbMG6K.js";import{_ as on,a as ln}from"./Tabs.CgZEd0ml.js";import"./use-compitable.BTv5PzVL.js";import"./Select.DOm-zoi7.js";import"./index.DxLfcg4e.js";import"./Empty.Dpu5cBr_.js";const sn=te({name:"ArrowUp",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},g("g",{fill:"none"},g("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),I="0!important",Xe="-1px!important";function ae(e){return Y(`${e}-type`,[A("& +",[M("button",{},[Y(`${e}-type`,[ee("border",{borderLeftWidth:I}),ee("state-border",{left:Xe})])])])])}function re(e){return Y(`${e}-type`,[A("& +",[M("button",[Y(`${e}-type`,[ee("border",{borderTopWidth:I}),ee("state-border",{top:Xe})])])])])}const un=M("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Ue("vertical",{flexDirection:"row"},[Ue("rtl",[M("button",[A("&:first-child:not(:last-child)",`
 margin-right: ${I};
 border-top-right-radius: ${I};
 border-bottom-right-radius: ${I};
 `),A("&:last-child:not(:first-child)",`
 margin-left: ${I};
 border-top-left-radius: ${I};
 border-bottom-left-radius: ${I};
 `),A("&:not(:first-child):not(:last-child)",`
 margin-left: ${I};
 margin-right: ${I};
 border-radius: ${I};
 `),ae("default"),Y("ghost",[ae("primary"),ae("info"),ae("success"),ae("warning"),ae("error")])])])]),Y("vertical",{flexDirection:"column"},[M("button",[A("&:first-child:not(:last-child)",`
 margin-bottom: ${I};
 margin-left: ${I};
 margin-right: ${I};
 border-bottom-left-radius: ${I};
 border-bottom-right-radius: ${I};
 `),A("&:last-child:not(:first-child)",`
 margin-top: ${I};
 margin-left: ${I};
 margin-right: ${I};
 border-top-left-radius: ${I};
 border-top-right-radius: ${I};
 `),A("&:not(:first-child):not(:last-child)",`
 margin: ${I};
 border-radius: ${I};
 `),re("default"),Y("ghost",[re("primary"),re("info"),re("success"),re("warning"),re("error")])])])]),cn={size:{type:String,default:void 0},vertical:Boolean},dn=te({name:"ButtonGroup",props:cn,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:a}=_e(e);return yt("-button-group",un,t),$e(Dt,e),{rtlEnabled:Ke("ButtonGroup",a,t),mergedClsPrefix:t}},render(){const{mergedClsPrefix:e}=this;return g("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),Ge=qe("n-dynamic-input"),pn=te({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:t}=he(Ge);return{mergedTheme:e,placeholder:t}},render(){const{mergedTheme:e,placeholder:t,value:a,clsPrefix:n,onUpdateValue:c,disabled:r}=this;return g("div",{class:`${n}-dynamic-input-preset-input`},g(fe,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:a,placeholder:t,onUpdateValue:c,disabled:r}))}}),mn=te({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:t,keyPlaceholderRef:a,valuePlaceholderRef:n}=he(Ge);return{mergedTheme:t,keyPlaceholder:a,valuePlaceholder:n,handleKeyInput(c){e.onUpdateValue({key:c,value:e.value.value})},handleValueInput(c){e.onUpdateValue({key:e.value.key,value:c})}}},render(){const{mergedTheme:e,keyPlaceholder:t,valuePlaceholder:a,value:n,clsPrefix:c,disabled:r}=this;return g("div",{class:`${c}-dynamic-input-preset-pair`},g(fe,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.key,class:`${c}-dynamic-input-pair-input`,placeholder:t,onUpdateValue:this.handleKeyInput,disabled:r}),g(fe,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.value,class:`${c}-dynamic-input-pair-input`,placeholder:a,onUpdateValue:this.handleValueInput,disabled:r}))}}),fn=M("dynamic-input",{width:"100%"},[M("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[M("dynamic-input-preset-input",{flex:1,alignItems:"center"}),M("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[M("dynamic-input-pair-input",[A("&:first-child",{"margin-right":"12px"})])]),ee("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Y("icon",{cursor:"pointer"})]),A("&:last-child",{marginBottom:0})]),M("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[M("form-item-blank",{paddingTop:"0 !important"})])]),me=new WeakMap,vn=Object.assign(Object.assign({},ge.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),_n=te({name:"DynamicInput",props:vn,setup(e,{slots:t}){const{mergedComponentPropsRef:a,mergedClsPrefixRef:n,mergedRtlRef:c,inlineThemeDisabled:r}=_e(),s=he(Nt,null),m=E(e.defaultValue),d=se(e,"value"),y=Ht(d,m),h=ge("DynamicInput","-dynamic-input",fn,bt,e,n),u=T(()=>{const{value:v}=y;if(Array.isArray(v)){const{max:_}=e;return _!==void 0&&v.length>=_}return!1}),k=T(()=>{const{value:v}=y;return Array.isArray(v)?v.length<=e.min:!0}),O=T(()=>{var v,_;return(_=(v=a==null?void 0:a.value)===null||v===void 0?void 0:v.DynamicInput)===null||_===void 0?void 0:_.buttonSize});function x(v){const{onInput:_,"onUpdate:value":$,onUpdateValue:b}=e;_&&ue(_,v),$&&ue($,v),b&&ue(b,v),m.value=v}function K(v,_){if(v==null||typeof v!="object")return _;const $=we(v)?Ee(v):v;let b=me.get($);return b===void 0&&me.set($,b=wt()),b}function q(v,_){const{value:$}=y,b=Array.from($??[]),N=b[v];if(b[v]=_,N&&_&&typeof N=="object"&&typeof _=="object"){const ye=we(N)?Ee(N):N,ce=we(_)?Ee(_):_,P=me.get(ye);P!==void 0&&me.set(ce,P)}x(b)}function w(){z(-1)}function z(v){const{value:_}=y,{onCreate:$}=e,b=Array.from(_??[]);if($)b.splice(v+1,0,$(v+1)),x(b);else if(t.default)b.splice(v+1,0,null),x(b);else switch(e.preset){case"input":b.splice(v+1,0,""),x(b);break;case"pair":b.splice(v+1,0,{key:"",value:""}),x(b);break}}function R(v){const{value:_}=y;if(!Array.isArray(_))return;const{min:$}=e;if(_.length<=$)return;const{onRemove:b}=e;b&&b(v);const N=Array.from(_);N.splice(v,1),x(N)}function o(v,_,$){if(_<0||$<0||_>=v.length||$>=v.length||_===$)return;const b=v[_];v[_]=v[$],v[$]=b}function C(v,_){const{value:$}=y;if(!Array.isArray($))return;const b=Array.from($);v==="up"&&o(b,_,_-1),v==="down"&&o(b,_,_+1),x(b)}$e(Ge,{mergedThemeRef:h,keyPlaceholderRef:se(e,"keyPlaceholder"),valuePlaceholderRef:se(e,"valuePlaceholder"),placeholderRef:se(e,"placeholder")});const G=Ke("DynamicInput",c,n),H=T(()=>{const{self:{actionMargin:v,actionMarginRtl:_}}=h.value;return{"--action-margin":v,"--action-margin-rtl":_}}),D=r?He("dynamic-input",void 0,H,e):void 0;return{locale:ke("DynamicInput").localeRef,rtlEnabled:G,buttonSize:O,mergedClsPrefix:n,NFormItem:s,uncontrolledValue:m,mergedValue:y,insertionDisabled:u,removeDisabled:k,handleCreateClick:w,ensureKey:K,handleValueChange:q,remove:R,move:C,createItem:z,mergedTheme:h,cssVars:r?void 0:H,themeClass:D==null?void 0:D.themeClass,onRender:D==null?void 0:D.onRender}},render(){const{$slots:e,itemClass:t,buttonSize:a,mergedClsPrefix:n,mergedValue:c,locale:r,mergedTheme:s,keyField:m,itemStyle:d,preset:y,showSortButton:h,NFormItem:u,ensureKey:k,handleValueChange:O,remove:x,createItem:K,move:q,onRender:w,disabled:z}=this;return w==null||w(),g("div",{class:[`${n}-dynamic-input`,this.rtlEnabled&&`${n}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(c)||c.length===0?g(Q,Object.assign({block:!0,ghost:!0,dashed:!0,size:a},this.createButtonProps,{disabled:this.insertionDisabled||z,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>ve(e["create-button-default"],()=>[r.create]),icon:()=>ve(e["create-button-icon"],()=>[g(oe,{clsPrefix:n},{default:()=>g(Ne,null)})])}):c.map((R,o)=>g("div",{key:m?R[m]:k(R,o),"data-key":m?R[m]:k(R,o),class:[`${n}-dynamic-input-item`,t],style:d},je(e.default,{value:c[o],index:o},()=>[y==="input"?g(pn,{disabled:z,clsPrefix:n,value:c[o],parentPath:u?u.path.value:void 0,path:u!=null&&u.path.value?`${u.path.value}[${o}]`:void 0,onUpdateValue:C=>{O(o,C)}}):y==="pair"?g(mn,{disabled:z,clsPrefix:n,value:c[o],parentPath:u?u.path.value:void 0,path:u!=null&&u.path.value?`${u.path.value}[${o}]`:void 0,onUpdateValue:C=>{O(o,C)}}):null]),je(e.action,{value:c[o],index:o,create:K,remove:x,move:q},()=>[g("div",{class:`${n}-dynamic-input-item__action`},g(dn,{size:a},{default:()=>[g(Q,{disabled:this.removeDisabled||z,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,circle:!0,onClick:()=>{x(o)}},{icon:()=>g(oe,{clsPrefix:n},{default:()=>g(zt,null)})}),g(Q,{disabled:this.insertionDisabled||z,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{K(o)}},{icon:()=>g(oe,{clsPrefix:n},{default:()=>g(Ne,null)})}),h?g(Q,{disabled:o===0||z,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{q("up",o)}},{icon:()=>g(oe,{clsPrefix:n},{default:()=>g(sn,null)})}):null,h?g(Q,{disabled:o===c.length-1||z,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{q("down",o)}},{icon:()=>g(oe,{clsPrefix:n},{default:()=>g(Yt,null)})}):null]}))]))))}}),Qe=qe("n-popconfirm"),Ye={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},Fe=Ct(Ye),hn=te({name:"NPopconfirmPanel",props:Ye,setup(e){const{localeRef:t}=ke("Popconfirm"),{inlineThemeDisabled:a}=_e(),{mergedClsPrefixRef:n,mergedThemeRef:c,props:r}=he(Qe),s=T(()=>{const{common:{cubicBezierEaseInOut:d},self:{fontSize:y,iconSize:h,iconColor:u}}=c.value;return{"--n-bezier":d,"--n-font-size":y,"--n-icon-size":h,"--n-icon-color":u}}),m=a?He("popconfirm-panel",void 0,s,r):void 0;return Object.assign(Object.assign({},ke("Popconfirm")),{mergedClsPrefix:n,cssVars:a?void 0:s,localizedPositiveText:T(()=>e.positiveText||t.value.positiveText),localizedNegativeText:T(()=>e.negativeText||t.value.negativeText),positiveButtonProps:se(r,"positiveButtonProps"),negativeButtonProps:se(r,"negativeButtonProps"),handlePositiveClick(d){e.onPositiveClick(d)},handleNegativeClick(d){e.onNegativeClick(d)},themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender})},render(){var e;const{mergedClsPrefix:t,showIcon:a,$slots:n}=this,c=ve(n.action,()=>this.negativeText===null&&this.positiveText===null?[]:[this.negativeText!==null&&g(Q,Object.assign({size:"small",onClick:this.handleNegativeClick},this.negativeButtonProps),{default:()=>this.localizedNegativeText}),this.positiveText!==null&&g(Q,Object.assign({size:"small",type:"primary",onClick:this.handlePositiveClick},this.positiveButtonProps),{default:()=>this.localizedPositiveText})]);return(e=this.onRender)===null||e===void 0||e.call(this),g("div",{class:[`${t}-popconfirm__panel`,this.themeClass],style:this.cssVars},Jt(n.default,r=>a||r?g("div",{class:`${t}-popconfirm__body`},a?g("div",{class:`${t}-popconfirm__icon`},ve(n.icon,()=>[g(oe,{clsPrefix:t},{default:()=>g(Et,null)})])):null,r):null),c?g("div",{class:[`${t}-popconfirm__action`]},c):null)}}),gn=M("popconfirm",[ee("body",`
 font-size: var(--n-font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[ee("icon",`
 display: flex;
 font-size: var(--n-icon-size);
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 margin: 0 8px 0 0;
 `)]),ee("action",`
 display: flex;
 justify-content: flex-end;
 `,[A("&:not(:first-child)","margin-top: 8px"),M("button",[A("&:not(:last-child)","margin-right: 8px;")])])]),yn=Object.assign(Object.assign(Object.assign({},ge.props),Kt),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},positiveButtonProps:Object,negativeButtonProps:Object,onPositiveClick:Function,onNegativeClick:Function}),bn=te({name:"Popconfirm",props:yn,__popover__:!0,setup(e){const{mergedClsPrefixRef:t}=_e(),a=ge("Popconfirm","-popconfirm",gn,Pt,e,t),n=E(null);function c(m){var d;if(!(!((d=n.value)===null||d===void 0)&&d.getMergedShow()))return;const{onPositiveClick:y,"onUpdate:show":h}=e;Promise.resolve(y?y(m):!0).then(u=>{var k;u!==!1&&((k=n.value)===null||k===void 0||k.setShow(!1),h&&ue(h,!1))})}function r(m){var d;if(!(!((d=n.value)===null||d===void 0)&&d.getMergedShow()))return;const{onNegativeClick:y,"onUpdate:show":h}=e;Promise.resolve(y?y(m):!0).then(u=>{var k;u!==!1&&((k=n.value)===null||k===void 0||k.setShow(!1),h&&ue(h,!1))})}return $e(Qe,{mergedThemeRef:a,mergedClsPrefixRef:t,props:e}),{setShow(m){var d;(d=n.value)===null||d===void 0||d.setShow(m)},syncPosition(){var m;(m=n.value)===null||m===void 0||m.syncPosition()},mergedTheme:a,popoverInstRef:n,handlePositiveClick:c,handleNegativeClick:r}},render(){const{$slots:e,$props:t,mergedTheme:a}=this;return g(qt,$t(t,Fe,{theme:a.peers.Popover,themeOverrides:a.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:e.activator||e.trigger,default:()=>{const n=kt(t,Fe);return g(hn,Object.assign(Object.assign({},n),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),e)}})}}),wn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function En(e,t){return U(),Z("svg",wn,t[0]||(t[0]=[S("path",{fill:"currentColor",d:"M3 6.524c0-.395.327-.714.73-.714h4.788c.006-.842.098-1.995.932-2.793A3.68 3.68 0 0 1 12 2a3.68 3.68 0 0 1 2.55 1.017c.834.798.926 1.951.932 2.793h4.788c.403 0 .73.32.73.714a.722.722 0 0 1-.73.714H3.73A.722.722 0 0 1 3 6.524"},null,-1),S("path",{fill:"currentColor",d:"M11.596 22h.808c2.783 0 4.174 0 5.08-.886c.904-.886.996-2.339 1.181-5.245l.267-4.188c.1-1.577.15-2.366-.303-2.865c-.454-.5-1.22-.5-2.753-.5H8.124c-1.533 0-2.3 0-2.753.5c-.454.5-.404 1.288-.303 2.865l.267 4.188c.185 2.906.277 4.36 1.182 5.245c.905.886 2.296.886 5.079.886",opacity:".5"},null,-1),S("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.425 11.482c.413-.044.78.273.821.707l.5 5.263c.041.433-.26.82-.671.864c-.412.043-.78-.273-.821-.707l-.5-5.263c-.041-.434.26-.821.671-.864m5.15 0c.412.043.713.43.671.864l-.5 5.263c-.04.434-.408.75-.82.707c-.413-.044-.713-.43-.672-.864l.5-5.264c.041-.433.409-.75.82-.707","clip-rule":"evenodd"},null,-1)]))}const Cn={name:"solar-trash-bin-minimalistic-bold-duotone",render:En},Pn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function kn(e,t){return U(),Z("svg",Pn,t[0]||(t[0]=[S("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[S("path",{d:"M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"}),S("path",{"stroke-linecap":"round",d:"M15 12h-3m0 0H9m3 0V9m0 3v3"})],-1)]))}const $n={name:"solar-add-square-linear",render:kn},In={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function xn(e,t){return U(),Z("svg",In,t[0]||(t[0]=[S("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[S("circle",{cx:"11",cy:"11",r:"9"}),S("path",{"stroke-linecap":"round",d:"M21.812 20.975c-.063.095-.176.208-.403.434c-.226.227-.34.34-.434.403a1.13 1.13 0 0 1-1.62-.408c-.053-.1-.099-.254-.19-.561c-.101-.335-.151-.503-.161-.621a1.13 1.13 0 0 1 1.218-1.218c.118.01.285.06.621.16c.307.092.46.138.56.192a1.13 1.13 0 0 1 .409 1.619Z"})],-1)]))}const Sn={name:"solar-rounded-magnifer-linear",render:xn},Gn=30*60*1e3,Rn=e=>{const t=localStorage.getItem(e);if(!t)return null;const a=JSON.parse(t);return Date.now()-a.timestamp>Gn?(localStorage.removeItem(e),null):a.data},Le=(e,t)=>{const a={data:t,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(a))},ie=(e,t)=>`enum_${t}_${e}`,Vn=It("enumsStore",{state:()=>({staticEnums:{},dynamicEnums:{},mcpEnums:{},staticEnumGroups:[],dynamicEnumGroups:[],mcpEnumGroups:[]}),actions:{async fetchEnumGroups(e){try{const t=await L.get(`/enums/groups?type=${e}`),{res:a,status:n}=t.data.value;return n===200&&a?(e==="static"?this.staticEnumGroups=a:e==="dynamic"?this.dynamicEnumGroups=a:e==="mcp"&&(this.mcpEnumGroups=a),a):[]}catch{return[]}},async addEnumGroup(e){try{const t=await L.post("/enums/groups",e),{res:a,status:n}=t.data.value;return n===200}catch(t){throw t}},async updateEnumGroup(e){try{const t=await L.put(`/enums/groups/${e.dict_code}`,e),{res:a,status:n}=t.data.value;return n===200}catch(t){throw t}},async deleteEnumGroup(e){try{const t=await L.delete(`/enums/groups/${e}`,{}),{res:a,status:n}=t.data.value;return n===200}catch(t){throw t}},async fetchEnumItems(e,t){const a=ie(e,t);try{const n=await L.get(`/enums/items?group_id=${e}&type=${t}`),{res:c,status:r}=n.data.value;return r===200&&c?(t==="static"?this.staticEnums[e]=c:t==="dynamic"?this.dynamicEnums[e]=c:t==="mcp"&&(this.mcpEnums[e]=c),Le(a,c),c):[]}catch{return[]}},async addEnumItem(e,t,a){try{const n={...t,group_id:e,type:a},c=await L.post("/enums/items",n),{res:r,status:s}=c.data.value;return s===200&&localStorage.removeItem(ie(e,a)),s===200}catch(n){throw n}},async updateEnumItem(e,t,a){try{const n=await L.put(`/enums/items/${t.id}`,t),{res:c,status:r}=n.data.value;return r===200&&localStorage.removeItem(ie(e,a)),r===200}catch(n){throw n}},async deleteEnumItem(e,t,a){try{const n=await L.delete(`/enums/items/${t}`,{}),{res:c,status:r}=n.data.value;return r===200&&localStorage.removeItem(ie(e,a)),r===200}catch(n){throw n}},async loadStaticEnums(e){return this.loadEnumItems(e,"static")},getStaticEnum(e){return this.staticEnums[e]||[]},async loadEnumItems(e,t="static"){return this.fetchEnumItems(e,t)},async getEnumItems(e,t="static"){const a=ie(e,t),n=Rn(a);if(n)return t==="static"?this.staticEnums[e]=n:t==="dynamic"?this.dynamicEnums[e]=n:t==="mcp"&&(this.mcpEnums[e]=n),n;try{const c=await L.get(`/enums/items?group_id=${e}&type=${t}`),{res:r,status:s}=c.data.value;return s===200&&r?(t==="static"?this.staticEnums[e]=r:t==="dynamic"?this.dynamicEnums[e]=r:t==="mcp"&&(this.mcpEnums[e]=r),Le(a,r),r):[]}catch{return[]}}}}),Re=()=>{const e=Vn(),t=E([]),a=E([]),n=E([]),c=xt({}),r=E(!1),s=E(""),m=async()=>{r.value=!0,s.value="";try{const o=await e.fetchEnumGroups("static");t.value=o}catch{s.value="获取静态枚举组失败"}finally{r.value=!1}},d=async()=>{r.value=!0,s.value="";try{const o=await e.fetchEnumGroups("dynamic");a.value=o}catch{s.value="获取动态枚举组失败"}finally{r.value=!1}},y=async()=>{r.value=!0,s.value="";try{const o=await e.fetchEnumGroups("mcp");n.value=o}catch{s.value="获取MCP Server枚举组失败"}finally{r.value=!1}},h=async(o,C="static")=>{r.value=!0,s.value="";try{const G=await e.fetchEnumItems(o,C);return c[o]=G,G}catch{return s.value=`获取枚举项失败 [${o}]`,[]}finally{r.value=!1}};return{staticEnumGroups:t,dynamicEnumGroups:a,mcpEnumGroups:n,enumItems:c,loading:r,error:s,fetchStaticEnumGroups:m,fetchDynamicEnumGroups:d,fetchMcpEnumGroups:y,fetchEnumItems:h,addStaticEnumGroup:async o=>{r.value=!0,s.value="";try{return await e.addEnumGroup({...o,type:"static"}),await m(),!0}catch{return s.value="添加静态枚举组失败",!1}finally{r.value=!1}},addDynamicEnumGroup:async o=>{r.value=!0,s.value="";try{return await e.addEnumGroup({...o,type:"dynamic"}),await d(),!0}catch{return s.value="添加动态枚举组失败",!1}finally{r.value=!1}},addMcpEnumGroup:async o=>{r.value=!0,s.value="";try{return await e.addEnumGroup({...o,type:"mcp"}),await y(),!0}catch{return s.value="添加MCP Server枚举组失败",!1}finally{r.value=!1}},updateEnumGroup:async o=>{r.value=!0,s.value="";try{return await e.updateEnumGroup(o),o.type==="static"?await m():o.type==="dynamic"?await d():o.type==="mcp"&&await y(),!0}catch{return s.value="更新枚举组失败",!1}finally{r.value=!1}},deleteEnumGroup:async(o,C)=>{r.value=!0,s.value="";try{return await e.deleteEnumGroup(o),C==="static"?await m():C==="dynamic"?await d():C==="mcp"&&await y(),!0}catch{return s.value="删除枚举组失败",!1}finally{r.value=!1}},addEnumItem:async(o,C,G="static")=>{r.value=!0,s.value="";try{return await e.addEnumItem(o,C,G),await h(o,G),!0}catch{return s.value="添加枚举项失败",!1}finally{r.value=!1}},updateEnumItem:async(o,C,G="static")=>{r.value=!0,s.value="";try{return await e.updateEnumItem(o,C,G),await h(o,G),!0}catch{return s.value="更新枚举项失败",!1}finally{r.value=!1}},deleteEnumItem:async(o,C,G="static")=>{r.value=!0,s.value="";try{return await e.deleteEnumItem(o,C,G),await h(o,G),!0}catch{return s.value="删除枚举项失败",!1}finally{r.value=!1}},useEnum:(o,C=!1)=>{const G=E([]),H=C?"dynamic":"static";return Ie(async()=>{const D=await e.getEnumItems(o,H);G.value=D}),T(()=>G.value)}}};function Bn(e={}){const a={...{type:"uuid",module:"default"},...e},n=E(!1),c=E(null),r=async(m=1)=>{try{n.value=!0,c.value=null;const d={type:a.type,module:a.module,count:m},h=(await L.get("/IdGenerator",d)).data.value;if(h&&h.code===0&&Array.isArray(h.data))return h.data;throw new Error((h==null?void 0:h.msg)||"获取ID失败")}catch(d){return c.value=d instanceof Error?d:new Error("获取ID时发生未知错误"),[]}finally{n.value=!1}};return{getId:async()=>a.type==="uuid"?Ut():(await r(1))[0]||"",isLoading:Ae(n),lastError:Ae(c)}}const Mn={class:"enum-item-manager border-1 border-[#6262664f] bg-(--n-color) rounded-md mt-5 p-5"},zn={__name:"EnumItemManager",props:{enumGroup:{type:Object,default:()=>({})},type:{type:String,default:"static",validator:e=>["static","dynamic"].includes(e)},readonly:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:t,emit:a}){const n=e,c=Se(),r=Re(),s=E([]),m=E(!1),d=E([{text:"标签",value:"label"},{text:"值",value:"value"},{text:"是否默认",value:"is_default"}]),y=async()=>{if(!n.enumGroup)return;const h=n.enumGroup.dict_code||n.enumGroup.group_id||n.enumGroup.id;if(h){m.value=!0;try{const u=await r.fetchEnumItems(h,n.type);if(u.dict_value&&Array.isArray(u.dict_value)){s.value=u.dict_value;return}if(Array.isArray(u)){s.value=u;return}s.value=[]}catch{c.error("加载枚举项失败"),s.value=[]}finally{m.value=!1}}};return Ie(()=>{y()}),St(()=>n.enumGroup,h=>{h&&y()},{immediate:!0,deep:!0}),t({loadEnumItems:y}),(h,u)=>{const k=We,O=Gt("EasyDataTable");return U(),Z("div",Mn,[l(O,{headers:d.value,items:s.value,alternating:"","fixed-header":"","table-height":300,"table-class-name":"enum-item-table","hide-footer":!0},{"item-is_default":f(({is_default:x})=>[l(k,{type:x?"success":"error"},{default:f(()=>[V(le(x?"是":"否"),1)]),_:2},1032,["type"])]),_:1},8,["headers","items"])])}}},Un=xe(zn,[["__scopeId","data-v-4fa74c55"]]),An={class:"enum-group-manager"},On={class:"enum-group-header"},Tn={class:"masonry-grid"},Dn={class:"card-content"},Nn={key:0},jn={class:"operation-wrapper border-t border-[#6262664f] pt-3 px-0"},Fn={style:{display:"flex","align-items":"center",width:"100%",gap:"5px"}},Ln={class:"flex gap-2 items-center ml-2",style:{"font-size":"20px"}},Kn=["onClick"],qn=["onClick"],Hn={__name:"EnumGroupManager",props:{type:{type:String,default:"static",validator:e=>["static","dynamic","mcp"].includes(e)},maxHeight:{type:Number,default:0}},emits:["update"],setup(e,{emit:t}){const a=e,n=Bn({type:"sequence",module:a.type=="static"?"senums":a.type=="dynamic"?"denums":"mcpsvs"}),c=()=>`temp_${Date.now()}_${Math.floor(Math.random()*1e3)}`,r=async()=>await n.getId(),s=t,m=Se(),d=Re(),y=E([]),h=E(""),u=E(!1),k=E(!1),O=E(!1),x=E(!1),K=E(null),q=E(null),w=E({id:null,dict_code:c(),dict_label:"",dict_value:[],dict_type:a.type,dict_sort:0,status:"0",api_path:"",remark:""}),z=T(()=>{const P={dict_code:{required:!0,message:"请输入字典编码",trigger:["blur","input"]},dict_label:{required:!0,message:"请输入字典标签",trigger:["blur","input"]},dict_value:{required:!0,message:"请输入字典键值",trigger:["blur","input"]}};return a.type==="dynamic"?{...P,api_path:{required:!0,message:"请输入API路径",trigger:["blur","input"]}}:P}),R=E({page:1,pageSize:10,pageSizes:[{label:"10条/页",value:10},{label:"20条/页",value:20},{label:"30条/页",value:30},{label:"40条/页",value:40}],itemCounts:0}),o=T(()=>h.value?y.value.filter(P=>P.dict_label.toLowerCase().includes(h.value.toLowerCase())||P.dict_code.toLowerCase().includes(h.value.toLowerCase())||P.dict_value.toLowerCase().includes(h.value.toLowerCase())):y.value);E([{text:"字典编码",value:"dict_code"},{text:"字典标签",value:"dict_label"},{text:"字典排序",value:"dict_sort"},...a.type==="dynamic"?[{text:"API路径",value:"api_path"}]:[],{text:"状态",value:"status"},{text:"备注",value:"remark"},{text:"操作",value:"actions"}]);const C=async()=>{u.value=!0;try{a.type==="static"?(await d.fetchStaticEnumGroups(),y.value=d.staticEnumGroups.value):a.type==="dynamic"?(await d.fetchDynamicEnumGroups(),y.value=d.dynamicEnumGroups.value):a.type==="mcp"&&d.fetchMcpEnumGroups&&(await d.fetchMcpEnumGroups(),y.value=d.mcpEnumGroups.value)}catch{m.error(`加载${a.type}枚举组失败`)}finally{u.value=!1}},G=async P=>{u.value=!0;try{await d.deleteEnumGroup(P,a.type)?(m.success("删除成功"),await C(),s("update")):m.error("删除失败")}catch{m.error("删除失败")}finally{u.value=!1}},H=P=>{K.value={...P,type:a.type},O.value=!0},D=()=>{var P;(P=q.value)==null||P.validate(async i=>{if(!i){u.value=!0;try{let X;const j={...w.value,dict_type:a.type};if(a.type==="static"||a.type==="mcp"){if(j.dict_value.length===0){m.error("请至少添加一个枚举项"),u.value=!1;return}for(let B=0;B<j.dict_value.length;B++){const de=j.dict_value[B];if(!de.label){m.error(`第${B+1}个枚举项的"枚举名称"不能为空`),u.value=!1;return}if(!de.value){m.error(`第${B+1}个枚举项的"枚举值"不能为空`),u.value=!1;return}}const F=new Set,J=new Set;for(const B of j.dict_value){if(F.has(B.label)){m.error("枚举项标签不能重复"),u.value=!1;return}if(J.has(B.value)){m.error("枚举项值不能重复"),u.value=!1;return}F.add(B.label),J.add(B.value)}}x.value&&w.value.id?X=await d.updateEnumGroup(j):a.type==="static"?X=await d.addStaticEnumGroup(j):a.type==="dynamic"?X=await d.addDynamicEnumGroup(j):a.type==="mcp"&&d.addMcpEnumGroup&&(X=await d.addMcpEnumGroup(j)),X?(m.success(x.value?"更新成功":"添加成功"),k.value=!1,await C(),s("update")):m.error("操作失败")}catch{m.error("操作失败")}finally{u.value=!1}}})},v=()=>{s("update")};Ie(()=>{C()});const _=E(null),$=()=>_.value?JSON.stringify(w.value)!==JSON.stringify(_.value):!1,b=async()=>{$()?window.$dialog.warning({title:"确认关闭",content:"表单已修改，确定要关闭吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{k.value=!1}}):k.value=!1},N=async P=>{x.value=!0;const i=await d.fetchEnumItems(P.dict_code);w.value={...i||[],id:c()},_.value=JSON.parse(JSON.stringify(w.value)),k.value=!0},ye=async()=>{x.value=!1,w.value={id:null,dict_code:c(),dict_label:"",dict_value:[],dict_type:a.type,dict_sort:0,css_class:"",list_class:"",status:"0",api_path:"",remark:""},_.value=null,k.value=!0;try{const P=await r();P&&!x.value&&(w.value.dict_code=P)}catch{}},ce=T(()=>{const P=(R.value.page-1)*R.value.pageSize,i=P+R.value.pageSize;return o.value.slice(P,i)});return(P,i)=>{var ze;const X=Bt,j=Tt,F=fe,J=Q,B=jt,de=Ft,Ve=We,be=Lt,et=Sn,tt=Mt,nt=Vt,at=bn,rt=Ze,ot=Wt,lt=Zt,ne=Xt,st=At,Be=en,it=tn,ut=Ot,ct=nn,dt=an,pt=$n,mt=Cn,ft=_n,vt=Je,_t=Qt,Me=rn;return U(),Z("div",An,[S("div",On,[l(B,{justify:"space-between"},{default:f(()=>[l(F,{value:h.value,"onUpdate:value":i[0]||(i[0]=p=>h.value=p),placeholder:"搜索字典",clearable:"",style:{width:"200px"}},{prefix:f(()=>[l(j,null,{default:f(()=>[l(X)]),_:1})]),_:1},8,["value"]),l(J,{type:"primary",onClick:ye},{default:f(()=>i[14]||(i[14]=[V("添加字典")])),_:1})]),_:1})]),l(ot,{class:"enum-group-body border-1 border-[#6262664f] rounded-md mt-5 p-5"},{default:f(()=>[ce.value.length===0?(U(),pe(de,{key:0,status:"404",title:"暂无数据",description:"请点击右上角添加字典按钮进行添加。"})):(U(),pe(be,{key:1,style:{"max-height":"450px"},trigger:"hover"},{default:f(()=>[S("div",Tn,[(U(!0),Z(Oe,null,Rt(ce.value,p=>(U(),pe(rt,{key:p.id||p.dict_code,title:p.dict_label,size:"small",embedded:"",hoverable:"",class:"enum-card masonry-item"},{"header-extra":f(()=>[l(Ve,{class:"enum-code"},{default:f(()=>[V(le(p.dict_code),1)]),_:2},1024)]),footer:f(()=>[S("div",jn,[l(J,{size:"tiny",tertiary:"",onClick:Te(W=>H(p),["stop"])},{default:f(()=>[l(et)]),_:2},1032,["onClick"]),l(J,{tertiary:"",size:"tiny",onClick:Te(W=>N(p),["stop"])},{default:f(()=>[l(tt)]),_:2},1032,["onClick"]),l(at,{onPositiveClick:()=>G(p.id)},{trigger:f(()=>[l(J,{tertiary:"",size:"tiny"},{default:f(()=>[l(nt)]),_:1})]),default:f(()=>[i[17]||(i[17]=V(" 确定删除？ "))]),_:2},1032,["onPositiveClick"])])]),default:f(()=>[S("div",Dn,[S("div",null,"排序："+le(p.dict_sort),1),p.api_path?(U(),Z("div",Nn,"API路径："+le(p.api_path),1)):Ce("",!0),S("div",null,[i[15]||(i[15]=V(" 状态： ")),l(Ve,{type:p.status==="0"?"success":"error",bordered:!1},{default:f(()=>[V(le(p.status==="0"?"正常":"停用"),1)]),_:2},1032,["type"])]),S("div",null,[i[16]||(i[16]=V(" 备注：")),l(be,{style:{"max-height":"50px"},trigger:"hover"},{default:f(()=>[V(le(p.remark),1)]),_:2},1024)])])]),_:2},1032,["title"]))),128))])]),_:1}))]),_:1}),l(B,{class:"enum-pagination"},{default:f(()=>[l(lt,{page:R.value.page,"onUpdate:page":[i[1]||(i[1]=p=>R.value.page=p),i[3]||(i[3]=p=>R.value.page=p)],"page-size":R.value.pageSize,"onUpdate:pageSize":[i[2]||(i[2]=p=>R.value.pageSize=p),i[4]||(i[4]=p=>R.value.pageSize=p)],"page-count":Math.ceil(o.value.length/R.value.pageSize),"show-size-picker":"","page-sizes":R.value.pageSizes},null,8,["page","page-size","page-count","page-sizes"])]),_:1}),l(Me,{show:k.value,"onUpdate:show":i[12]||(i[12]=p=>k.value=p),preset:"dialog",title:x.value?"编辑字典":"添加字典",style:{width:"600px","z-index":"1"},onAfterLeave:b},{action:f(()=>[l(B,null,{default:f(()=>[l(J,{onClick:b},{default:f(()=>i[23]||(i[23]=[V("取消")])),_:1}),l(J,{type:"primary",onClick:D,loading:u.value,disabled:u.value},{default:f(()=>i[24]||(i[24]=[V("确定")])),_:1},8,["loading","disabled"])]),_:1})]),default:f(()=>[l(_t,{ref_key:"formRef",ref:q,model:w.value,rules:z.value,"label-placement":"left","label-width":"100px","require-mark-placement":"right-hanging"},{default:f(()=>[l(ne,{label:"字典编码",path:"dict_code"},{default:f(()=>[l(F,{value:w.value.dict_code,"onUpdate:value":i[5]||(i[5]=p=>w.value.dict_code=p),disabled:""},null,8,["value"])]),_:1}),l(ne,{label:"字典标签",path:"dict_label"},{default:f(()=>[l(F,{value:w.value.dict_label,"onUpdate:value":i[6]||(i[6]=p=>w.value.dict_label=p),placeholder:"请输入字典标签",disabled:u.value},null,8,["value","disabled"])]),_:1}),l(ne,{label:"字典排序",path:"dict_sort"},{default:f(()=>[l(st,{value:w.value.dict_sort,"onUpdate:value":i[7]||(i[7]=p=>w.value.dict_sort=p),placeholder:"请输入字典排序",disabled:u.value},null,8,["value","disabled"])]),_:1}),e.type==="dynamic"?(U(),pe(ne,{key:0,label:"API路径",path:"api_path"},{default:f(()=>[l(F,{value:w.value.api_path,"onUpdate:value":i[8]||(i[8]=p=>w.value.api_path=p),placeholder:"请输入API路径",disabled:u.value},null,8,["value","disabled"])]),_:1})):Ce("",!0),l(ne,{label:"状态",path:"status"},{default:f(()=>[l(it,{value:w.value.status,"onUpdate:value":i[9]||(i[9]=p=>w.value.status=p),disabled:u.value},{default:f(()=>[l(Be,{value:"0"},{default:f(()=>i[18]||(i[18]=[V("启用")])),_:1}),l(Be,{value:"1"},{default:f(()=>i[19]||(i[19]=[V("停用")])),_:1})]),_:1},8,["value","disabled"])]),_:1}),l(ne,{label:"备注",path:"remark"},{default:f(()=>[l(F,{value:w.value.remark,"onUpdate:value":i[10]||(i[10]=p=>w.value.remark=p),type:"textarea",placeholder:"请输入备注",disabled:u.value},null,8,["value","disabled"])]),_:1}),e.type==="static"?(U(),Z(Oe,{key:1},[l(ut,null,{default:f(()=>i[20]||(i[20]=[V("枚举项")])),_:1}),l(vt,{"theme-overrides":{Scrollbar:{width:"5px",railInsetHorizontal:"4px 4px 4px auto",borderRadius:0}}},{default:f(()=>[l(be,{style:{"max-height":"300px"},class:"pl-2 pr-2",trigger:"hover","y-placementclass":"w-full"},{default:f(()=>[l(ft,{value:w.value.dict_value,"onUpdate:value":i[11]||(i[11]=p=>w.value.dict_value=p),preset:"pair","key-placeholder":"枚举名","value-placeholder":"枚举值","on-create":()=>({label:"",value:"",is_default:!1})},{"create-button-default":f(()=>i[21]||(i[21]=[V("添加枚举")])),default:f(({value:p})=>[S("div",Fn,[l(dt,{trigger:"hover"},{trigger:f(()=>[l(ct,{checked:p.is_default,"onUpdate:checked":W=>p.is_default=W,style:{"margin-right":"12px"},disabled:u.value},null,8,["checked","onUpdate:checked","disabled"])]),default:f(()=>[i[22]||(i[22]=V(" 默认选项 "))]),_:2},1024),l(F,{value:p.label,"onUpdate:value":W=>p.label=W,type:"text",placeholder:"枚举名",disabled:u.value},null,8,["value","onUpdate:value","disabled"]),l(F,{value:p.value,"onUpdate:value":W=>p.value=W,type:"text",placeholder:"枚举值",disabled:u.value},null,8,["value","onUpdate:value","disabled"])])]),action:f(({index:p,create:W,remove:ht})=>[S("div",Ln,[S("div",{class:"cursor-pointer",onClick:()=>!u.value&&W(p)},[l(pt,{class:De({"opacity-50 cursor-not-allowed":u.value})},null,8,["class"])],8,Kn),S("div",{class:"cursor-pointer",onClick:()=>!u.value&&ht(p)},[l(mt,{class:De({"opacity-50 cursor-not-allowed":u.value})},null,8,["class"])],8,qn)])]),_:1},8,["value"])]),_:1})]),_:1})],64)):Ce("",!0)]),_:1},8,["model","rules"])]),_:1},8,["show","title"]),l(Me,{show:O.value,"onUpdate:show":i[13]||(i[13]=p=>O.value=p),preset:"card",style:{width:"40%"},title:((ze=K.value)==null?void 0:ze.dict_label)+" - 枚举项详情"},{default:f(()=>[l(Un,{"enum-group":K.value,type:e.type,onUpdate:v,readonly:!0},null,8,["enum-group","type"])]),_:1},8,["show","title"])])}}},Pe=xe(Hn,[["__scopeId","data-v-88fcb941"]]),Jn={class:"component-context p-12"},Wn={class:"enum-container h-full"},Zn={__name:"enumManage",setup(e){const t=Se();Re();const a=E(null),n=E(null),c=E(null),r=()=>{t.success("枚举数据已更新")};return(s,m)=>{const d=on,y=ln,h=Ze,u=Je,k=gt;return U(),Z("div",Jn,[S("div",Wn,[l(u,{class:"h-full"},{default:f(()=>[l(h,{title:"枚举管理中心"},{default:f(()=>[l(y,{type:"line",animated:""},{default:f(()=>[l(d,{name:"static",tab:"静态枚举"},{default:f(()=>[l(Pe,{type:"static",ref_key:"staticEnumGroupManagerRef",ref:a,onUpdate:r},null,512)]),_:1}),l(d,{name:"dynamic",tab:"动态枚举"},{default:f(()=>[l(Pe,{type:"dynamic",ref_key:"dynamicEnumGroupManagerRef",ref:n,onUpdate:r},null,512)]),_:1}),l(d,{name:"mcp",tab:"MCP Server"},{default:f(()=>[l(Pe,{type:"mcp",ref_key:"mcpEnumGroupManagerRef",ref:c,onUpdate:r},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),l(k,{loading:"加载中..."})])}}},Pa=xe(Zn,[["__scopeId","data-v-fd95c1fa"]]);export{Pa as default};
